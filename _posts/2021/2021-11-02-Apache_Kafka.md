---
layout: post
title: -Spring- TransactionManager (트랜잭션 관리자)
categories: [Development,Spring]
tags: [Spring,Spring Boot]
date: 2021-11-01 18:58:00 +0900
thumbnail: "/assets/img/bloging/spring/spring_logo.png"
excerpt_separator: <!--more-->
hide: true
---
강력한 메세지큐 카프카

<!--more-->

`Apache kafka`는 데이터 통합, 스트리밍 분석, 고성능 데이터 파이프라인 그리고 미션 크리티컬한 어플리케이션을 위해 수많은 회사가 사용한 분산 이벤트 스트리밍 플랫폼 오픈소스 입니다.

## 소개

[원문](https://kafka.apache.org/intro)

**이벤트 스트림이 뭔가요?**

이벤트 스트림은 사람으로 치면, 인체의 중추신경계의 디지털 버전이에요. 이는 비즈니스가 점점 더 소프트웨어 정의 및 자동화되고 소프트웨어 사용자가 더 많은 소프트웨어인 '상시 가동' 세계를 위한 기술 기반입니다.

기술적으로 말하면 이벤트 스트리밍은 데이터베이스, 센서, 모바일 장치, 클라우드 서비스 및 소프트웨어 애플리케이션과 같은 이벤트 소스에서 이벤트 스트림의 형태로 실시간으로 데이터를 캡처하는 방식입니다. 나중에 검색할 수 있도록 이러한 이벤트 스트림을 영구적으로 저장합니다. 실시간으로 그리고 소급적으로 이벤트 스트림을 조작, 처리 및 반응하고 필요에 따라 이벤트 스트림을 다른 목적지 기술로 라우팅하는 단계를 포함합니다. 따라서 이벤트 스트리밍은 데이터의 지속적인 흐름과 해석을 보장하므로 올바른 정보가 적시에 적절한 위치에 있습니다.

**이벤트 스트림으로 뭘 할수 있나요?**

이벤트 스트림은 수많은 산업 및 조직의 다양한 사용 사례에 적용됩니다. 그 많은 예는 다음과 같습니다 :

- 증권 거래소, 은행 및 보험 등의 결제 및 금융 거래를 실시간으로 처리하기 위해.
- 물류 및 자동차 산업같은 자동차, 트럭, 함대 및 선박등을 실시간으로 추적하고 모니터링 하기 위해.
- 공장 및 풍력 발전 단지와 같은 IoT 기기 또는 다른 장비로부터의 센서 데이터를 지속적으로 캡쳐하고 분석하기 위해.
- 소매, 호텔및 여행산업 그리고 모바일 어플리케이션과 같은 고객 상호작용 및 주문을 수집하고 즉시 대응하기 위해.
- 응급상황에 시간적인 치료를 보장하는 조건에 병원보호 및 예측 변동으로 환자를 모니터링 하기위해.
- 병원에서 치료 중인 환자를 모니터링하고 상태 변화를 예측하여 응급 상황에서 시기 적절한 치료를 보장합니다.
- 회사의 다른 부서에서 생성된 데이터를 연결, 저장 및 사용 가능하게 만들기 위해.
- 데이터 플랫폼, 이벤트 중심 아키텍쳐 및 마이크로 서비스를 위한 기반 역할을 하기 위해.

**아파치 카프카®는 이벤트 스트리밍 플랫폼 입니다. 무슨 의미 인가요?**

카프카는 세가지 주요 기능을 결합하므로 단일 `battle-tested` 솔루션을 사용하여 `end-to-end` 이벤트 스트리밍 사용사례를 구현할 수 있어요.

1. 다른 시스템으로부터 데이터의 지속적인 `import/export`를 포함하여 이벤트 스트림에 **발행** 및 **구독**합니다.
2. 이벤트 스트림을 원하는만큼 내구성 있고 안정적으로 저장합니다.
3. 이벤트 스트림이 발생 시 또는 소급하여 처리합니다.

그리고 이 모든 기능성은 분산되고 높은 확장가능성과 탄력적이며 내결함성이 있으며 안전한 방식 으로 제공됩니다. Kafka는 베어 메탈하드웨어, 가상 머신, 컨테이너, 온프레미스 및 클라우드에 배포할 수 있습니다. Kafka 환경을 자체 관리하거나 다양한 공급업체에서 제공하는 완전 관리형 서비스를 사용할 수 있습니다.

### Kafka는 간단히 말해 어떻게 동작 하나요?

카프카는 고성능 [TCP 네트워크 프로토콜](https://kafka.apache.org/protocol.html)을 통해 통신하는 서버와 클라이언트로 구성된 분산 시스템입니다. 이는 베어메탈 하드웨어, 가상머신, 컨테이너 온프레미스 및 클라우드에 배포 할 수 있어요.

**`서버`** : 카프카는 다중 데이터센터 또는 클라우드 범위에 걸칠 수 있는 한개 이상의 서버의 클러스터로 동작 합니다. 이러한 서버중 일부는 브로커라고하는 스토리지 계층을 형성 합니다. 다른 서버는 [카프카 연결](“https://kafka.apache.org/documentation/#connect”)을 실행하여 이벤트 스트림으로 데이터를 지속적으로 가져오거나 내보내고 카프카를 RDB 및 기타 다른 Kafka 클러스터와 같은 기존 시스템과 통합합니다. `미션 크리티컬`한 사용사례를 구현할 수 있도록, 카프카 클러스터는 높은 확장성 및 내결함성이 있습니다. (만약 해당서버의 어떤 문제라도 발생한다면, 다른 서버는 작업을 인계받아 데이터 손실없이 지속적으로 작동을 보장합니다.

**`클라이언트`** : 네트워크 문제 또는 시스템 오류가 발생한 경우에도 이벤트 스트림을 병렬에 대규모 내결함성 방식으로 읽고, 쓰고, 처리하는 분산 어플리케이션 및 마이크로 서비스를 작성할 수 있습니다. 카프카는 카프카 커뮤니티에서 제공하는 [수십개의 클라이언트](https://cwiki.apache.org/confluence/display/KAFKA/Clients)로 확장된 일부 클라이언트와 함께 제공됩니다(클라이언트는 Go, Python, C/C++ 및 많은 다른 프로그래밍 언어, 더높은 레벨의 [카프카 스트림](https://kafka.apache.org/documentation/streams/) 라이브러리를 포함하는 Java 및 Scala 심지어 REST API까지도 이용가능 합니다).


### 주요 개념 및 용어

**이벤트**는 선생님의 비즈니스 또는 세상에 “뭔가 일어난” 사실을 기록해요. 이것을 문서에서는 기록 또는 메세지라고 부릅니다. 데이터를 카프카에 읽거나 쓸 때, 이 이벤트의 형식에 합니다. 개념적으로, 이벤트는 key, value, timestamp 및 선택적인 메타데이터 헤더를 갖고 있어요. 이게 그 예제 이벤트에요.
* Event key: “Alice”
* Event value: “Made a payment of $200 to Bob”
* Event timestamp: “Jun. 25, 2020 at 2:06 pm.”

`프로듀서`는 카프카에 이벤트를 발행(쓰기)하는 그런 클라이언트 어플리케이션이고, `Consumer`는 이러한 이벤트를 구독(읽기 및 처리)하는 것 입니다. 카프카에서, `프로듀서`와 `컨슈머`는 완전히 분리되고 각각 다른 `agnostic(지식과 상관없이 기능을 수행할 수 있는 기술)`이며 카프카가 알려진대로 높은 확장성을 달성하기 위한 핵심 설계 요소 입니다. 예를 들면, `프로듀서`가 `컨슈머`에 대해 기다릴 필요가 없습니다. 카프카는 정확히 한번 이벤트를 처리하는 기능과 같은 다양한 [보장](https://kafka.apache.org/documentation/#intro_guarantees)을 제공해요.

이벤트는 `topic` 안에서 조직화 되어있고 영구적으로 저장 됩니다. 정말 간단히 되어 있으며, `topic`은 파일 시스템의 폴더와 비슷하고, 이벤트는 폴더 안 파일이에요. 예제 `topic` 이름은 “payments”가 될 수 있어요. 카프카에서 토픽은 항상 여러 발행자와 여러 구독자입니다. (토픽은 이것에 이벤트를 발행하는 0, 1 또는 N개의 발행자와 이러한 이벤트를 구독하는 0, 1 또는 N개의 컨슈머를 가질 수 있습니다. )
